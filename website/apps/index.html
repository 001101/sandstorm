<!DOCTYPE html>

<html>
  <head>
    <meta charset='utf-8'>
    <meta name="viewport" content="width=480">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300,600' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" media="screen" href="../style.css">

    <title>Sandstorm Apps</title>
    
    <script type="text/javascript">
      function install(packageId) {
        document.getElementById("other-addr").required =
            document.getElementById("location-other").checked;
        var form = document.getElementById("target-form");
        if (form.checkValidity && !form.checkValidity()) {
          document.getElementById("fake-submit").click();
          return;
        }

        var target;
        if (document.getElementById("location-alpha").checked) {
          target = "https://alpha.sandstorm.io";
        } else if (document.getElementById("location-localhost").checked) {
          target = "http://localhost:3000";
        } else if (document.getElementById("location-other").checked) {
          target = document.getElementById("other-addr").value;
          if (!target) {
            window.alert("You must enter a URL when selecting \"other\".");
            return;
          }
        } else {
          window.alert("Please indicate where your Sandstorm instance is located " +
                       "using the radio buttons before clicking \"Install\".");
          return;
        }
        
        document.location = target + "/install/" + packageId;
      }
    </script>
  </head>
  <body>
    <div id="apps">
      <h1>Sandstorm Apps</h1>

      <p>This page is for people who already have a Sandstorm instance set up.
        Use the buttons below to install apps.

      <form id="target-form"><b>Where is your Sandstorm instance?</b><br>
        Before installing you must tell us where to install:<br>
        <input type="radio" required name="location" id="location-alpha"> Sandstorm Alpha (https://alpha.sandstorm.io)<br>
        <input type="radio" required name="location" id="location-localhost"> Local instance (http://localhost:3000)<br>
        <input type="radio" required name="location" id="location-other"> Other
            <input type="text" placeholder="http://example.com" id="other-addr">
        <input type="submit" id="fake-submit" style="display:none">
      </form>
      
      <script type="text/javascript">
        (function () {
          var query = document.location.search;
          if (query.lastIndexOf("?host=", 0) === 0) {
            var origin = query.slice(6);
            if (origin == "https://alpha.sandstorm.io") {
              document.getElementById("location-alpha").checked = true;
            } else if (origin == "http://localhost:3000") {
              document.getElementById("location-localhost").checked = true;
            } else if (origin.lastIndexOf("https:", 0) === 0 ||
                       origin.lastIndexOf("http:", 0) === 0) {
              document.getElementById("location-other").checked = true;
              document.getElementById("other-addr").value = origin;
            }
          }
        })();
      </script>

      <div class="app">
        <button onclick="install('f55e2a582e90a3e88ee8bf34b95a4b60?url=http://sandstorm.io/apps/ssjekyll2.spk')">Install »</button>
        <h3>Hacker CMS</h3>
        <p>This is a mash-up of <a href="http://jekyllrb.com/">Jekyll</a>,
          <a href="http://ace.c9.io/">Ace</a>, and <a href="http://www.jstree.com/">jsTree</a>
          to create a Markdown-based web site editing and publishing app.  This app was stiched
          together over the course of one day by Kenton.
        <p><b>Warning:</b>  This app currently is not "collaborative".  If multiple people try to
          edit at the same time, they will clobber each other's changes.  We might fix this in the
          future.
        <p><a href="https://github.com/kentonv/ssjekyll">Code on Github</a>
        <p style="text-align: center">
          <a href="https://github.com/kentonv/ssjekyll/blob/master/screenshot.png">
          <img width=448 height=381 src="ssjekyll.png"></a>
      </div>

      <div class="app">
        <button onclick="install('32618df3fb42a66c747d75435cc9efef?url=http://sandstorm.io/apps/etherpad.spk')">Install »</button>
        <h3>Etherpad</h3>
        <p>This is a port of <a href="http://etherpad.org/">Etherpad</a>, a collaborative document editor.
      </div>
      
      <div class="app">
        <button onclick="install('5151531c1748e612ec0e4fddc71190ed?url=http://sandstorm.io/apps/meteor-todos.spk')">Install »</button>
        <h3>Meteor Todo List</h3>
        <p>This is the "Todo List" example application that comes with the
        <a href="http://meteor.com">Meteor</a> development tools.
      </div>
      
      <div class="app">
        <button onclick="install('f305df6e8ec2acb0aa6ea155bf8aa024?url=http://sandstorm.io/apps/duoludo.spk')">Install »</button>
        <h3>Duoludo</h3>
        <p>A minimalist platformer game with checkpoints, replay, and collaboration.  A port of
          <a href="http://dwrensha.ws/duoludo">duoludo</a> by
          <a href="https://github.com/dwrensha">David Renshaw</a>.
      </div>

      <div class="app">
        <button onclick="install('a487cd628c051e2de9e12b2651ace994?url=http://sandstorm.io/apps/shell-busybox.spk')">Install »</button>
        <h3>Web Shell</h3>
        <p>A very simple front-end to a Busybox shell by
          <a href="https://github.com/kevinwallace/">Kevin Wallace</a>.  Can be used to poke at
          the Sandstorm sandbox.  (Note:  As of this time, resource-exhaustion-based DoS attacks
          are easy to carry out from a shell.  We're working on tightening things up.  If you are a
          Sandstorm Alpha user, please be nice and don't crash our server, thanks. :))
        <p><a href="https://github.com/kevinwallace/sandstorm-shell">Code on Github</a>
      </div>

      <div class="app">
        <h3>Your App Here</h3>
        <p>Have you written a Sandstorm app that you'd like to see here?
          <a href="mailto:kenton@sandstorm.io">Let us know.</a>
      </div>
    </div>

    <!-- Google Analytics -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-42127409-1', 'sandstorm.io');
      ga('send', 'pageview');
    </script>
  </body>
</html>
