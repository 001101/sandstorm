<template name="sandstormGrainList">
  <div class="grain-list">
    <h1>Grains</h1>
    {{#if quotaEnabled}}
    <div class="light-box">
      <span class="grains-size"><strong>My grains' total size:</strong> {{ myGrainsSize }}</span>
    </div>
    {{/if}}
    <div class="light-box">
      <span class="grain-count"><strong>Grains I own:</strong> {{ myGrainsCount }}</span>
    </div>
    <div class="search-row">
      <img title="Search" class="search-icon" src="/search.svg"><input class="search-bar" type="text" placeholder="search" value="{{ searchText }}" />
    </div>
    <table class="grain-list-table">
      <thead>
        <tr>
            <td class="td-app-icon">App</td>
            <td class="grain-name">Name</td>
            <td>Last Activity</td>
            {{!-- Collaborators, size TODO
            <td>Collaborators</td>
            <td>Size</td>
            --}}
        </tr>
      </thead>
      <tbody>
        {{#each filteredSortedGrains}}
        <tr class="grain" data-grainid="{{ _id }}">
          <td class="td-app-icon"><div class="app-icon" title="{{appTitle}}" style="background-image: url('{{ iconSrc }}');"></div></td>
          <td class="grain-name"><a href="{{ pathFor route='grain' grainId=_id }}">{{title}}</a></td>
          <td>{{dateString lastUsed}}</td>
          {{!-- Collaborators, size TODO
          <td>TODO: collaborators</td>
          <td>{{ size }}</td>
          --}}
        </tr>
        {{/each}}
      </tbody>
    </table>

    {{#unless hasAnyGrainsCreatedOrSharedWithMe}}
    <div>
      <p>In Sandstorm, every document is a <em>grain</em>.</p>

      <p><a href="/grain/new">Install apps now to start creating.</a></p>
    </div>
    {{/unless}}
  </div>
</template>
