<template name="loginButtons">
  {{#if currentUser}}
    {{#if loggingIn}}
      {{! We aren't actually logged in yet; we're just setting Meteor.userId
          optimistically during an at-startup login-with-token. We expose this
          state so other UIs can treat it specially, but we'll just treat it
          as logged out. }}
      {{> _loginButtonsLoggingIn }}
    {{else}}
      {{> _loginButtonsLoggedIn}}
    {{/if}}
  {{else}}
    {{> _loginButtonsLoggedOut}}
  {{/if}}
</template>

<template name="_loginButtonsLoggedIn">
  {{> _loginButtonsLoggedInDropdown}}
</template>

<template name="_loginButtonsLoggedOut">
  {{#if configurationLoaded}}
    {{> _loginButtonsLoggedOutDropdown}}
  {{/if}}
</template>

<!-- used in various places to display messages to user -->
<template name="_loginButtonsMessages">
  {{#if errorMessage}}
    <div class="message error-message">{{errorMessage}}</div>
  {{/if}}
  {{#if infoMessage}}
    <div class="message info-message">{{infoMessage}}</div>
  {{/if}}
</template>

<template name="_loginButtonsLoggingIn">
  {{> _loginButtonsLoggingInPadding}}
  <div class="loading">&nbsp;</div>
  {{> _loginButtonsLoggingInPadding}}
</template>

<template name="_loginButtonsLoggingInPadding">
  {{! just add some padding }}
  <div class="login-buttons-padding"></div>
</template>
